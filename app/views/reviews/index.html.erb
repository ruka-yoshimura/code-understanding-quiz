<div class="index-header">
  <h1>苦手克服一覧</h1>
  <p style="color: #94a3b8;">過去に間違えて、まだ正解できていないクイズです。再挑戦して理解を深めましょう！</p>
</div>

<% if @quizzes.any? %>
<div class="posts">
  <% @quizzes.each do |quiz| %>
  <div class="post-card">
    <h3 style="color: #38bdf8; margin-top: 0;"><%= quiz.question %></h3>
    <p style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 10px;">
      元のコード: <%= quiz.post.title %>
    </p>

    <div class="code-block" style="margin: 10px 0; padding: 10px; max-height: 200px; overflow: hidden; position: relative;">
      <pre><code><%= truncate(quiz.original_code, length: 300) %></code></pre>
      <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 30px; background: linear-gradient(transparent, #0f172a);"></div>
    </div>

    <div style="margin-top: 15px;">
      <%= link_to "再挑戦する →", quiz_path(quiz), class: "button primary", style: "font-size: 0.875rem;" %>
    </div>
  </div>
  <% end %>
</div>
<% else %>
<div class="quiz-card" style="text-align: center; padding: 60px;">
  <h3>🎉 苦手な問題はありません！</h3>
  <p style="color: #94a3b8; margin-top: 10px;">素晴らしいです。新しいコードを投稿して、さらに知識を広げましょう。</p>
  <%= link_to "ホームに戻る", root_path, class: "button secondary", style: "margin-top: 20px;" %>
</div>
<% end %>
